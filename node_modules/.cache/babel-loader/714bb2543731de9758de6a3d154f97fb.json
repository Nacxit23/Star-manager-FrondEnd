{"remainingRequest":"/home/nacxit/Documentos/Proyectos/Web/ProyectoPasantia/stars-manager-front/node_modules/babel-loader/lib/index.js!/home/nacxit/Documentos/Proyectos/Web/ProyectoPasantia/stars-manager-front/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/home/nacxit/Documentos/Proyectos/Web/ProyectoPasantia/stars-manager-front/src/views/Events/Events.js?vue&type=script&lang=js&","dependencies":[{"path":"/home/nacxit/Documentos/Proyectos/Web/ProyectoPasantia/stars-manager-front/src/views/Events/Events.js","mtime":1555280254646},{"path":"/home/nacxit/Documentos/Proyectos/Web/ProyectoPasantia/stars-manager-front/node_modules/cache-loader/dist/cjs.js","mtime":1549926009192},{"path":"/home/nacxit/Documentos/Proyectos/Web/ProyectoPasantia/stars-manager-front/node_modules/babel-loader/lib/index.js","mtime":1549926008785},{"path":"/home/nacxit/Documentos/Proyectos/Web/ProyectoPasantia/stars-manager-front/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":1549926008774}],"contextDependencies":[],"result":["import _objectSpread from \"/home/nacxit/Documentos/Proyectos/Web/ProyectoPasantia/stars-manager-front/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport \"core-js/modules/es6.array.find-index\";\nimport { events, update, deleteEvent as _deleteEvent } from './Events.gql';\nimport { format } from 'date-fns';\nimport swal from 'sweetalert2';\nimport Modal from '@/components/Modal';\nexport default {\n  name: 'event',\n  data: function data() {\n    return {\n      Event: {\n        id: '',\n        date: ''\n      },\n      showModal: false\n    };\n  },\n  components: {\n    Modal: Modal\n  },\n  apollo: {\n    events: {\n      query: events,\n      update: function update(data) {\n        return data.events;\n      }\n    }\n  },\n  methods: {\n    updateEvent: function updateEvent() {\n      this.$apollo.mutate({\n        mutation: update,\n        variables: {\n          input: {\n            id: this.Event.id,\n            date: format(new Date(this.Event.date), 'YYYY-MM-DD H:mm:ss')\n          }\n        }\n      });\n    },\n    editEvent: function editEvent(event) {\n      this.Event.id = event.id;\n      this.Event.date = '';\n      this.showModal = true;\n    },\n    deleteEvent: function deleteEvent(idEvent) {\n      var _this = this;\n\n      swal({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(function (result) {\n        // console.log('events', events)\n        if (result.value) {\n          _this.$apollo.mutate({\n            mutation: _deleteEvent,\n            variables: {\n              id: idEvent\n            },\n            update: function update(cache, _ref) {\n              var deleteEvent = _ref.data.deleteEvent;\n              var query = {\n                query: events\n              };\n\n              var _cache$readQuery = cache.readQuery(query),\n                  events = _cache$readQuery.events;\n\n              var index = events.findIndex(function (event) {\n                return event.id == idEvent;\n              });\n              events.splice(index, 1, deleteEvent);\n              cache.writeQuery(_objectSpread({}, query, {\n                data: {\n                  events: events\n                }\n              }));\n            }\n          });\n\n          swal('Deleted!', 'Your Event has been deleted.', 'success');\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["/home/nacxit/Documentos/Proyectos/Web/ProyectoPasantia/stars-manager-front/src/views/Events/Events.js"],"names":["events","update","deleteEvent","format","swal","Modal","name","data","Event","id","date","showModal","components","apollo","query","methods","updateEvent","$apollo","mutate","mutation","variables","input","Date","editEvent","event","idEvent","title","text","type","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","cache","readQuery","index","findIndex","splice","writeQuery"],"mappings":"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","sourcesContent":["import {events, update, deleteEvent} from './Events.gql';\nimport {format} from 'date-fns';\nimport swal from 'sweetalert2';\nimport Modal from '@/components/Modal';\n\nexport default {\n  name: 'event',\n\n  data() {\n    return {\n      Event: {\n        id: '',\n        date: '',\n      },\n      showModal: false,\n    };\n  },\n\n  components: {\n    Modal,\n  },\n\n  apollo: {\n    events: {\n      query: events,\n      update: data => data.events,\n    },\n  },\n\n  methods: {\n    updateEvent() {\n      this.$apollo.mutate({\n        mutation: update,\n        variables: {\n          input: {\n            id: this.Event.id,\n            date: format(new Date(this.Event.date), 'YYYY-MM-DD H:mm:ss'),\n          },\n        },\n      });\n    },\n    editEvent(event) {\n      this.Event.id = event.id;\n      this.Event.date = '';\n      this.showModal = true;\n    },\n    deleteEvent(idEvent) {\n      swal({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        type: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!',\n      }).then(result => {\n        // console.log('events', events)\n        if (result.value) {\n          this.$apollo.mutate({\n            mutation: deleteEvent,\n            variables: {\n              id: idEvent,\n            },\n            update(\n              cache,\n              {\n                data: {deleteEvent},\n              }\n            ) {\n              const query = {\n                query: events,\n              };\n              const {events} = cache.readQuery(query);\n              const index = events.findIndex(event => event.id == idEvent);\n\n              events.splice(index, 1, deleteEvent);\n\n              cache.writeQuery({\n                ...query,\n                data: {\n                  events,\n                },\n              });\n            },\n          });\n          swal('Deleted!', 'Your Event has been deleted.', 'success');\n        }\n      });\n    },\n  },\n};\n"]}]}